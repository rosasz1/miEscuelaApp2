<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}Panel{% endblock %}</title>
  <!-- Estilo base (todos los roles) -->
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <!-- Estilo exclusivo para alumno -->
  {% if session['usuario']['rol'] == 'alumno' %}
    <link rel="stylesheet" href="{{ url_for('static', filename='style_alumno.css') }}">
  {% endif %}
  <!-- Estilo exclusivo para admin -->
  {% if session['usuario']['rol'] == 'admin' %}
    <link rel="stylesheet" href="{{ url_for('static', filename='style_admin.css') }}">
  {% endif %}
  <!-- (Opcional futuro) Estilo exclusivo para profesor -->
  {% if session['usuario']['rol'] == 'profesor' %}
    <link rel="stylesheet" href="{{ url_for('static', filename='style_profesor.css') }}">
  {% endif %}
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
  <div class="d-flex">
    <!-- SIDEBAR -->
    <div class="sidebar">
      {% block sidebar %}
        {% if session['usuario']['rol'] == 'admin' %}
          {% include 'admin/sidebar_admin.html' %}
        {% elif session['usuario']['rol'] == 'profesor' %}
          {% include 'profesor/sidebar_profesor.html' %}
        {% elif session['usuario']['rol'] == 'alumno' %}
          {% include 'alumno/sidebar_alumno.html' %}
        {% endif %}
      {% endblock %}
    </div>

    <!-- MAIN CONTENT -->
    <div class="flex-grow-1 p-4">
      <h3 class="mb-4">{% block panel_title %}{% endblock %}</h3>
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          {% for msg in messages %}
            <div class="alert alert-info">{{ msg }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}
      {% block content %}{% endblock %}
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Script personalizado para el sidebar acordeÃ³n -->
  <script>
    function toggleMenu(element) {
      element.classList.toggle("open");
    }
  </script>
</body>
</html>